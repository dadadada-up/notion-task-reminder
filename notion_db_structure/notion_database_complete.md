# Notion ä»»åŠ¡æ•°æ®åº“å®Œæ•´æ–‡æ¡£

æœ¬æ–‡æ¡£æ•´åˆäº† Notion ä»»åŠ¡æ•°æ®åº“çš„æ‰€æœ‰ç»“æ„è¯´æ˜ï¼ŒåŒ…æ‹¬å„å­—æ®µçš„å®šä¹‰ã€ç”¨é€”å’Œä»£ç ä½¿ç”¨ç¤ºä¾‹ã€‚

## ç›®å½•

- [æ•°æ®åº“åŸºæœ¬ä¿¡æ¯](#æ•°æ®åº“åŸºæœ¬ä¿¡æ¯)
- [æ¦‚è¿°](#æ¦‚è¿°)
- [æ•°æ®åº“ç»“æ„å›¾](#æ•°æ®åº“ç»“æ„å›¾)
- [å­—æ®µè¯¦ç»†è¯´æ˜](#å­—æ®µè¯¦ç»†è¯´æ˜)
  - [æ–‡æœ¬å­—æ®µ](#æ–‡æœ¬å­—æ®µ)
  - [çŠ¶æ€å­—æ®µ](#çŠ¶æ€å­—æ®µ)
  - [å››è±¡é™å­—æ®µ](#å››è±¡é™å­—æ®µ)
  - [ä»»åŠ¡ç±»å‹å­—æ®µ](#ä»»åŠ¡ç±»å‹å­—æ®µ)
  - [è´Ÿè´£äººå­—æ®µ](#è´Ÿè´£äººå­—æ®µ)
  - [æ—¥æœŸå­—æ®µ](#æ—¥æœŸå­—æ®µ)
  - [æ•°å­—å’Œè®¡ç®—å­—æ®µ](#æ•°å­—å’Œè®¡ç®—å­—æ®µ)
  - [å…³ç³»å­—æ®µ](#å…³ç³»å­—æ®µ)
- [æ•°æ®åº“è§†å›¾](#æ•°æ®åº“è§†å›¾)
- [ä»£ç é›†æˆ](#ä»£ç é›†æˆ)

## æ•°æ®åº“åŸºæœ¬ä¿¡æ¯

- **æ•°æ®åº“åç§°**: ä»»åŠ¡
- **æ•°æ®åº“ID**: 7c4e8b9a5f6d2c1e3b7a9c8e5f2d1b3a
- **åˆ›å»ºæ—¶é—´**: 2023-01-01
- **æœ€åç¼–è¾‘æ—¶é—´**: 2023-12-31

## æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªç”¨äºä»»åŠ¡ç®¡ç†çš„ Notion æ•°æ®åº“ï¼Œé‡‡ç”¨ GTD (Getting Things Done) å’Œå››è±¡é™æ—¶é—´ç®¡ç†æ–¹æ³•çš„åŸåˆ™è®¾è®¡ã€‚æ•°æ®åº“æ”¯æŒä»»åŠ¡çš„åˆ›å»ºã€åˆ†ç±»ã€ä¼˜å…ˆçº§æ’åºã€çŠ¶æ€è·Ÿè¸ªå’Œæ—¶é—´ç®¡ç†ï¼Œå¹¶é€šè¿‡å…³ç³»å­—æ®µå»ºç«‹ä»»åŠ¡ä¹‹é—´çš„å±‚çº§å’Œä¾èµ–å…³ç³»ã€‚

## æ•°æ®åº“ç»“æ„å›¾

```
ä»»åŠ¡æ•°æ®åº“
â”œâ”€â”€ åŸºæœ¬ä¿¡æ¯
â”‚   â”œâ”€â”€ ä»»åŠ¡åç§° (title)
â”‚   â”œâ”€â”€ å¤‡æ³¨ (rich_text)
â”‚   â””â”€â”€ URL (url)
â”œâ”€â”€ åˆ†ç±»ä¸çŠ¶æ€
â”‚   â”œâ”€â”€ çŠ¶æ€ (select: inbox, pedding, doing, done)
â”‚   â”œâ”€â”€ å››è±¡é™ (select: P0-P3)
â”‚   â””â”€â”€ ä»»åŠ¡ç±»å‹ (select: å®¶åº­ç”Ÿæ´», ç¤¾äº¤, ä¸ªäººæˆé•¿, å·¥ä½œ, å¥åº·, ç†è´¢æŠ•èµ„, ä¿é™©å‰¯ä¸š)
â”œâ”€â”€ æ—¶é—´ç®¡ç†
â”‚   â”œâ”€â”€ æˆªæ­¢æ—¥æœŸ (date)
â”‚   â”œâ”€â”€ åˆ›å»ºæ—¥æœŸ (created_time)
â”‚   â”œâ”€â”€ å®Œæˆæ—¥æœŸ (date)
â”‚   â”œâ”€â”€ é¢„è®¡æ—¶é—´ (number)
â”‚   â””â”€â”€ å®é™…æ—¶é—´ (number)
â”œâ”€â”€ ä»»åŠ¡å…³ç³»
â”‚   â”œâ”€â”€ ä¸Šçº§é¡¹ç›® (relation)
â”‚   â”œâ”€â”€ å­çº§é¡¹ç›® (relation)
â”‚   â”œâ”€â”€ æ­£åœ¨é˜»æ­¢ (relation)
â”‚   â””â”€â”€ è¢«é˜»æ­¢ (relation)
â””â”€â”€ å…¶ä»–
    â”œâ”€â”€ è´Ÿè´£äºº (select: pp, dada)
    â””â”€â”€ è¿›åº¦ (formula)
```

## å­—æ®µè¯¦ç»†è¯´æ˜

### æ–‡æœ¬å­—æ®µ

#### ä»»åŠ¡åç§°

- **å­—æ®µåç§°**: ä»»åŠ¡åç§°
- **å­—æ®µç±»å‹**: title
- **å­—æ®µID**: title

##### æè¿°

ä»»åŠ¡åç§°æ˜¯æ•°æ®åº“çš„ä¸»æ ‡é¢˜å­—æ®µï¼Œç”¨äºç®€æ˜æ‰¼è¦åœ°æè¿°ä»»åŠ¡å†…å®¹ã€‚æ¯ä¸ªä»»åŠ¡å¿…é¡»æœ‰ä¸€ä¸ªåç§°ã€‚

##### åœ¨ä»£ç ä¸­çš„ä½¿ç”¨

```python
def get_task_name(task):
    """ä»ä»»åŠ¡å¯¹è±¡ä¸­æå–ä»»åŠ¡åç§°"""
    if not task or not task.get('properties'):
        return "æœªçŸ¥ä»»åŠ¡"
    
    properties = task.get('properties', {})
    title_property = properties.get('ä»»åŠ¡åç§°', {})
    title = title_property.get('title', [])
    
    if title and len(title) > 0:
        return title[0].get('plain_text', 'æœªçŸ¥ä»»åŠ¡')
    return "æœªçŸ¥ä»»åŠ¡"

# åœ¨æ¶ˆæ¯ä¸­æ˜¾ç¤ºä»»åŠ¡åç§°
task_name = get_task_name(task)
message.append(f"ğŸ“Œ {task_name}")

# æ ¹æ®ä»»åŠ¡åç§°æ’åº
sorted_tasks = sorted(tasks, key=lambda x: get_task_name(x))
```

#### å¤‡æ³¨

- **å­—æ®µåç§°**: å¤‡æ³¨
- **å­—æ®µç±»å‹**: rich_text
- **å­—æ®µID**: %3Bj%3Bm

##### æè¿°

å¤‡æ³¨å­—æ®µç”¨äºè®°å½•ä»»åŠ¡çš„è¯¦ç»†è¯´æ˜ã€ä¸Šä¸‹æ–‡ä¿¡æ¯æˆ–å…¶ä»–ç›¸å…³æ³¨é‡Šã€‚å¯ä»¥åŒ…å«æ ¼å¼åŒ–æ–‡æœ¬ã€é“¾æ¥ç­‰å¯Œæ–‡æœ¬å†…å®¹ã€‚

##### åœ¨ä»£ç ä¸­çš„ä½¿ç”¨

```python
# è·å–ä»»åŠ¡å¤‡æ³¨
notes = []
if properties.get('å¤‡æ³¨') and properties['å¤‡æ³¨'].get('rich_text'):
    for text_item in properties['å¤‡æ³¨']['rich_text']:
        if text_item.get('plain_text'):
            notes.append(text_item.get('plain_text'))

# åœ¨æ¶ˆæ¯ä¸­æ˜¾ç¤ºå¤‡æ³¨
if notes:
    notes_text = ' '.join(notes)
    # å¦‚æœå¤‡æ³¨å¤ªé•¿ï¼Œæˆªæ–­æ˜¾ç¤º
    if len(notes_text) > 100:
        notes_text = notes_text[:97] + '...'
    message.append(f"   ğŸ“ å¤‡æ³¨: {notes_text}")
```

#### URL

- **å­—æ®µåç§°**: URL
- **å­—æ®µç±»å‹**: url
- **å­—æ®µID**: %3Bj%3Bm

##### æè¿°

URLå­—æ®µç”¨äºå­˜å‚¨ä¸ä»»åŠ¡ç›¸å…³çš„é“¾æ¥ï¼Œå¯ä»¥æ˜¯å‚è€ƒèµ„æ–™ã€ç›¸å…³æ–‡æ¡£æˆ–ä»»åŠ¡ç›¸å…³çš„ç½‘é¡µé“¾æ¥ã€‚

##### åœ¨ä»£ç ä¸­çš„ä½¿ç”¨

```python
# è·å–ä»»åŠ¡URL
task_url = None
if properties.get('URL') and properties['URL'].get('url'):
    task_url = properties['URL']['url']

# åœ¨æ¶ˆæ¯ä¸­æ˜¾ç¤ºURL
if task_url:
    # å¦‚æœURLå¤ªé•¿ï¼Œä½¿ç”¨çŸ­é“¾æ¥è¡¨ç¤º
    display_url = task_url
    if len(task_url) > 50:
        display_url = task_url[:47] + '...'
    message.append(f"   ğŸ”— é“¾æ¥: {display_url}")
```

### çŠ¶æ€å­—æ®µ

- **å­—æ®µåç§°**: çŠ¶æ€
- **å­—æ®µç±»å‹**: status
- **å­—æ®µID**: ~W\`

#### æè¿°

çŠ¶æ€å­—æ®µç”¨äºè·Ÿè¸ªä»»åŠ¡çš„å½“å‰è¿›åº¦çŠ¶æ€ï¼Œä»åˆå§‹æ”¶é›†åˆ°æœ€ç»ˆå®Œæˆã€‚

#### é€‰é¡¹å€¼

| çŠ¶æ€åç§° | çŠ¶æ€ID | é¢œè‰² | æè¿° |
|---------|-------|------|------|
| inbox | QxVE | default | æ–°æ”¶é›†çš„ä»»åŠ¡ï¼Œå°šæœªå¼€å§‹å¤„ç† |
| pedding | sI@[ | default | ç­‰å¾…å¼€å§‹çš„ä»»åŠ¡ |
| doing | gjoD | blue | æ­£åœ¨è¿›è¡Œä¸­çš„ä»»åŠ¡ |
| done | b81e1b11-7200-43bc-940d-9c361936a670 | green | å·²å®Œæˆçš„ä»»åŠ¡ |

#### çŠ¶æ€åˆ†ç»„

çŠ¶æ€è¢«åˆ†ä¸ºä¸‰ä¸ªä¸»è¦åˆ†ç»„ï¼š

| åˆ†ç»„åç§° | åˆ†ç»„ID | é¢œè‰² | åŒ…å«çš„çŠ¶æ€ |
|---------|-------|------|-----------|
| To-do | 72331709-9ef5-4913-9efd-8acdea25036e | gray | inbox, pedding |
| In progress | b7cd0252-5a51-4a04-811b-dfb8a1680013 | blue | doing |
| Complete | 23d8eb0d-fa9b-4f2d-8244-5d1a77f59a4e | green | done |

#### åœ¨ä»£ç ä¸­çš„ä½¿ç”¨

```python
status_obj = properties.get('çŠ¶æ€', {})
status = status_obj.get('status', {}).get('name', 'unknown') if status_obj else 'unknown'
```

è¿‡æ»¤æ¡ä»¶ç¤ºä¾‹ï¼š

```python
# æŸ¥è¯¢æœªå®Œæˆçš„ä»»åŠ¡
filter_conditions = {
    "and": [
        {
            "property": "çŠ¶æ€",
            "status": {
                "does_not_equal": "done"
            }
        }
    ]
}

# æŸ¥è¯¢å·²å®Œæˆçš„ä»»åŠ¡
filter_conditions = {
    "and": [
        {
            "property": "çŠ¶æ€",
            "status": {
                "equals": "done"
            }
        }
    ]
}
```

æ’åºé¡ºåºï¼š

```python
status_order = {'inbox': 0, 'pedding': 1, 'doing': 2, 'done': 3}
```

### å››è±¡é™å­—æ®µ

- **å­—æ®µåç§°**: å››è±¡é™
- **å­—æ®µç±»å‹**: select
- **å­—æ®µID**: tn@V

#### æè¿°

å››è±¡é™å­—æ®µåŸºäºæ—¶é—´ç®¡ç†çŸ©é˜µç†è®ºï¼Œç”¨äºå¯¹ä»»åŠ¡è¿›è¡Œä¼˜å…ˆçº§åˆ†ç±»ï¼Œå¸®åŠ©ç”¨æˆ·ç¡®å®šä»»åŠ¡çš„é‡è¦æ€§å’Œç´§æ€¥æ€§ã€‚

#### é€‰é¡¹å€¼

| é€‰é¡¹åç§° | é€‰é¡¹ID | é¢œè‰² | æè¿° |
|---------|-------|------|------|
| P0 é‡è¦ç´§æ€¥ | JmX= | red | æ—¢é‡è¦åˆç´§æ€¥çš„ä»»åŠ¡ï¼Œéœ€è¦ç«‹å³å¤„ç† |
| P1 é‡è¦ä¸ç´§æ€¥ | h=\\Z | blue | é‡è¦ä½†ä¸ç´§æ€¥çš„ä»»åŠ¡ï¼Œéœ€è¦è§„åˆ’å’Œå®‰æ’ |
| P2 ç´§æ€¥ä¸é‡è¦ | <\`Sy | brown | ç´§æ€¥ä½†ä¸é‡è¦çš„ä»»åŠ¡ï¼Œå¯è€ƒè™‘å§”æ´¾ |
| P3 ä¸é‡è¦ä¸ç´§æ€¥ | LiDV | gray | æ—¢ä¸é‡è¦ä¹Ÿä¸ç´§æ€¥çš„ä»»åŠ¡ï¼Œå¯è€ƒè™‘åˆ é™¤æˆ–å»¶å |

#### åœ¨ä»£ç ä¸­çš„ä½¿ç”¨

```python
priority_obj = properties.get('å››è±¡é™', {})
priority = priority_obj.get('select', {}).get('name', 'P3') if priority_obj else 'P3'
```

å¤„ç†ä¼˜å…ˆçº§é”®å€¼ï¼š

```python
priority_key = priority.split()[0] if ' ' in priority else priority  # å¤„ç†ä¼˜å…ˆçº§æ ¼å¼ï¼Œæå–P0-P3éƒ¨åˆ†
```

ä¼˜å…ˆçº§æ’åºï¼š

```python
priority_order = {
    "P0 é‡è¦ç´§æ€¥": 0,
    "P1 é‡è¦ä¸ç´§æ€¥": 1,
    "P2 ç´§æ€¥ä¸é‡è¦": 2,
    "P3 ä¸é‡è¦ä¸ç´§æ€¥": 3
}

# åœ¨æ’åºä¸­ä½¿ç”¨
tasks.sort(key=lambda x: (
    priority_order.get(x.get('priority', 'P3'), 999),
    status_order.get(x.get('status', 'unknown'), 999)
))
```

ç»Ÿè®¡é‡è¦å’Œç´§æ€¥ä»»åŠ¡ï¼š

```python
# ç»Ÿè®¡é‡è¦å’Œç´§æ€¥ä»»åŠ¡
if priority_key in ['P0', 'P1']:
    important_count += 1
if priority_key == 'P0' or priority_key == 'P2':
    urgent_count += 1
```

### ä»»åŠ¡ç±»å‹å­—æ®µ

- **å­—æ®µåç§°**: ä»»åŠ¡ç±»å‹
- **å­—æ®µç±»å‹**: select
- **å­—æ®µID**: vZVW

#### æè¿°

ä»»åŠ¡ç±»å‹å­—æ®µç”¨äºå¯¹ä»»åŠ¡è¿›è¡Œåˆ†ç±»ï¼Œå¸®åŠ©ç”¨æˆ·æŒ‰ç…§ä¸åŒçš„ç”Ÿæ´»å’Œå·¥ä½œé¢†åŸŸç»„ç»‡ä»»åŠ¡ã€‚

#### é€‰é¡¹å€¼

| é€‰é¡¹åç§° | é€‰é¡¹ID | é¢œè‰² | æè¿° |
|---------|-------|------|------|
| å®¶åº­ç”Ÿæ´» | 7f18fac4-5c65-4dca-b8d0-92984463e12b | purple | ä¸å®¶åº­å’Œæ—¥å¸¸ç”Ÿæ´»ç›¸å…³çš„ä»»åŠ¡ |
| ç¤¾äº¤ | cfbc9b69-e23e-4cd1-94fe-d4fe26818d1d | blue | ä¸ç¤¾äº¤æ´»åŠ¨å’Œäººé™…å…³ç³»ç›¸å…³çš„ä»»åŠ¡ |
| ä¸ªäººæˆé•¿ | 4eb1fd95-1211-4aab-be55-052c73cb9501 | red | ä¸ä¸ªäººå­¦ä¹ å’Œæˆé•¿ç›¸å…³çš„ä»»åŠ¡ |
| å·¥ä½œ | a514dcce-1605-4b89-8b91-3d4c8530953f | yellow | ä¸èŒä¸šå’Œå·¥ä½œç›¸å…³çš„ä»»åŠ¡ |
| å¥åº· | 39c03b69-c17d-4e02-a88d-f0287db9efc6 | brown | ä¸å¥åº·å’Œå¥èº«ç›¸å…³çš„ä»»åŠ¡ |
| ç†è´¢æŠ•èµ„ | 20e36ea5-d0b5-41b9-9441-992acdd73218 | pink | ä¸è´¢åŠ¡ç®¡ç†å’ŒæŠ•èµ„ç›¸å…³çš„ä»»åŠ¡ |
| ä¿é™©å‰¯ä¸š | cde65157-9290-46e1-a5f3-c426badafc35 | default | ä¸ä¿é™©å’Œå‰¯ä¸šç›¸å…³çš„ä»»åŠ¡ |

#### åœ¨ä»£ç ä¸­çš„ä½¿ç”¨

```python
task_type_obj = properties.get('ä»»åŠ¡ç±»å‹', {})
task_type = task_type_obj.get('select', {}).get('name', 'æœªåˆ†ç±»') if task_type_obj else 'æœªåˆ†ç±»'
```

åœ¨æ¶ˆæ¯æ ¼å¼åŒ–ä¸­ä½¿ç”¨ï¼š

```python
# å¦‚æœæœ‰ä¼˜å…ˆçº§å’Œä»»åŠ¡ç±»å‹ï¼Œæ·»åŠ åˆ°ä»»åŠ¡ä¿¡æ¯ä¸­
if task_priority != 'P3' or task_type != 'æœªåˆ†ç±»':
    extra_info = []
    if task_priority != 'P3':
        extra_info.append(task_priority[:2])
    if task_type != 'æœªåˆ†ç±»':
        extra_info.append(task_type)
    if extra_info:
        task_line.append(f" ({' | '.join(extra_info)})")
```

ç»Ÿè®¡ä»»åŠ¡ç±»å‹ï¼š

```python
# æŒ‰ä»»åŠ¡ç±»å‹ç»Ÿè®¡
task_types = {}  # æŒ‰ä»»åŠ¡ç±»å‹ç»Ÿè®¡
task_types[task_type] = task_types.get(task_type, 0) + 1

# ç”Ÿæˆä»»åŠ¡ç±»å‹ç»Ÿè®¡
type_stats = "- ä»»åŠ¡ç±»å‹:\n"
for task_type, count in sorted(task_types.items(), key=lambda x: x[1], reverse=True):
    type_stats += f"  â€¢ {task_type}: {count}\n"
```

### è´Ÿè´£äººå­—æ®µ

- **å­—æ®µåç§°**: è´Ÿè´£äºº
- **å­—æ®µç±»å‹**: select
- **å­—æ®µID**: mAG@

#### æè¿°

è´Ÿè´£äººå­—æ®µç”¨äºæŒ‡å®šä»»åŠ¡çš„æ‰§è¡Œè€…ï¼Œå¸®åŠ©åœ¨å¤šäººåä½œç¯å¢ƒä¸­æ˜ç¡®ä»»åŠ¡çš„è´£ä»»å½’å±ã€‚

#### é€‰é¡¹å€¼

| é€‰é¡¹åç§° | é€‰é¡¹ID | é¢œè‰² | æè¿° |
|---------|-------|------|------|
| pp | []yc | green | å›¢é˜Ÿæˆå‘˜ pp |
| dada | Kbst | orange | å›¢é˜Ÿæˆå‘˜ dada |

#### åœ¨ä»£ç ä¸­çš„ä½¿ç”¨

```python
assignee_obj = properties.get('è´Ÿè´£äºº', {})
assignee = assignee_obj.get('select', {}).get('name', 'æœªåˆ†é…') if assignee_obj else 'æœªåˆ†é…'
```

æŒ‰è´Ÿè´£äººåˆ†ç»„ä»»åŠ¡ï¼š

```python
# æŒ‰è´Ÿè´£äººåˆ†ç»„
tasks_by_assignee = {}

# æ·»åŠ ä»»åŠ¡åˆ°å¯¹åº”è´Ÿè´£äººçš„åˆ—è¡¨ä¸­
if assignee not in tasks_by_assignee:
    tasks_by_assignee[assignee] = []
tasks_by_assignee[assignee].append(task_info)

# ç”Ÿæˆæ¯ä¸ªè´Ÿè´£äººçš„ä»»åŠ¡æ¶ˆæ¯
for assignee, tasks in tasks_by_assignee.items():
    # è®¡ç®—ä»»åŠ¡æ€»æ•°
    total_tasks = len(tasks)
    message = [f"ğŸ“‹ å¾…åŠä»»åŠ¡ | {assignee} (å…±{total_tasks}æ¡)\n"]
    # ...å¤„ç†è¯¥è´Ÿè´£äººçš„ä»»åŠ¡...
```

### æ—¥æœŸå­—æ®µ

#### æˆªæ­¢æ—¥æœŸ

- **å­—æ®µåç§°**: æˆªæ­¢æ—¥æœŸ
- **å­—æ®µç±»å‹**: date
- **å­—æ®µID**: Ij%3Bj

##### æè¿°

æˆªæ­¢æ—¥æœŸå­—æ®µç”¨äºæŒ‡å®šä»»åŠ¡éœ€è¦å®Œæˆçš„æœ€åæœŸé™ã€‚å¯ä»¥è®¾ç½®å…·ä½“æ—¥æœŸï¼Œä¹Ÿå¯ä»¥åŒ…å«æ—¶é—´ã€‚

##### åœ¨ä»£ç ä¸­çš„ä½¿ç”¨

```python
# è·å–æˆªæ­¢æ—¥æœŸ
due_date = None
if properties.get('æˆªæ­¢æ—¥æœŸ') and properties['æˆªæ­¢æ—¥æœŸ'].get('date'):
    due_date_str = properties['æˆªæ­¢æ—¥æœŸ']['date'].get('start')
    if due_date_str:
        # è½¬æ¢ä¸ºåŒ—äº¬æ—¶é—´
        due_date = datetime.fromisoformat(due_date_str.replace('Z', '+00:00')).astimezone(
            timezone(timedelta(hours=8)))

# åœ¨æ¶ˆæ¯ä¸­æ˜¾ç¤ºæˆªæ­¢æ—¥æœŸ
if due_date:
    due_date_str = due_date.strftime('%Y-%m-%d %H:%M')
    message.append(f"   â° æˆªæ­¢æ—¥æœŸ: {due_date_str}")
    
    # æ£€æŸ¥æ˜¯å¦å³å°†åˆ°æœŸ
    now = datetime.now(timezone(timedelta(hours=8)))
    days_left = (due_date.date() - now.date()).days
    
    if days_left < 0:
        message.append(f"   âš ï¸ å·²é€¾æœŸ {abs(days_left)} å¤©")
    elif days_left == 0:
        message.append(f"   âš ï¸ ä»Šæ—¥åˆ°æœŸ")
    elif days_left <= 3:
        message.append(f"   âš ï¸ è¿˜å‰© {days_left} å¤©åˆ°æœŸ")
```

#### åˆ›å»ºæ—¥æœŸ

- **å­—æ®µåç§°**: åˆ›å»ºæ—¥æœŸ
- **å­—æ®µç±»å‹**: created_time
- **å­—æ®µID**: %3Bqkl

##### æè¿°

åˆ›å»ºæ—¥æœŸå­—æ®µè‡ªåŠ¨è®°å½•ä»»åŠ¡åˆ›å»ºçš„æ—¶é—´ï¼Œä¸å¯æ‰‹åŠ¨ä¿®æ”¹ã€‚

##### åœ¨ä»£ç ä¸­çš„ä½¿ç”¨

```python
# è·å–åˆ›å»ºæ—¥æœŸ
created_time = None
if properties.get('åˆ›å»ºæ—¥æœŸ') and properties['åˆ›å»ºæ—¥æœŸ'].get('created_time'):
    created_time_str = properties['åˆ›å»ºæ—¥æœŸ']['created_time']
    if created_time_str:
        created_time = datetime.fromisoformat(created_time_str.replace('Z', '+00:00')).astimezone(
            timezone(timedelta(hours=8)))

# è®¡ç®—ä»»åŠ¡å­˜åœ¨çš„å¤©æ•°
if created_time:
    now = datetime.now(timezone(timedelta(hours=8)))
    days_existed = (now.date() - created_time.date()).days
    if days_existed > 30:
        message.append(f"   â³ å·²åˆ›å»º {days_existed} å¤©")
```

#### å®Œæˆæ—¥æœŸ

- **å­—æ®µåç§°**: å®Œæˆæ—¥æœŸ
- **å­—æ®µç±»å‹**: date
- **å­—æ®µID**: %5Dj%3Bm

##### æè¿°

å®Œæˆæ—¥æœŸå­—æ®µç”¨äºè®°å½•ä»»åŠ¡å®Œæˆçš„æ—¥æœŸã€‚é€šå¸¸åœ¨ä»»åŠ¡çŠ¶æ€å˜ä¸º"done"æ—¶æ‰‹åŠ¨æˆ–è‡ªåŠ¨å¡«å†™ã€‚

##### åœ¨ä»£ç ä¸­çš„ä½¿ç”¨

```python
# è·å–å®Œæˆæ—¥æœŸ
completed_date = None
if properties.get('å®Œæˆæ—¥æœŸ') and properties['å®Œæˆæ—¥æœŸ'].get('date'):
    completed_date_str = properties['å®Œæˆæ—¥æœŸ']['date'].get('start')
    if completed_date_str:
        completed_date = datetime.fromisoformat(completed_date_str.replace('Z', '+00:00')).astimezone(
            timezone(timedelta(hours=8)))

# æ£€æŸ¥ä»Šæ—¥å®Œæˆçš„ä»»åŠ¡
now = datetime.now(timezone(timedelta(hours=8)))
if completed_date and completed_date.date() == now.date():
    today_completed_tasks.append(task)
    
# åœ¨æ™šé—´æ¶ˆæ¯ä¸­æ˜¾ç¤ºä»Šæ—¥å®Œæˆçš„ä»»åŠ¡
if today_completed_tasks:
    evening_message.append("\nğŸ‰ ä»Šæ—¥å·²å®Œæˆçš„ä»»åŠ¡:")
    for task in today_completed_tasks:
        task_name = get_task_name(task)
        evening_message.append(f"âœ… {task_name}")
```

### æ•°å­—å’Œè®¡ç®—å­—æ®µ

#### é¢„è®¡æ—¶é—´

- **å­—æ®µåç§°**: é¢„è®¡æ—¶é—´
- **å­—æ®µç±»å‹**: number
- **å­—æ®µID**: %3Bj%3Bm
- **æ ¼å¼**: å°æ—¶ï¼ˆæ•°å­—ï¼‰

##### æè¿°

é¢„è®¡æ—¶é—´å­—æ®µç”¨äºè®°å½•å®Œæˆä»»åŠ¡é¢„è®¡éœ€è¦çš„æ—¶é—´ï¼Œä»¥å°æ—¶ä¸ºå•ä½ã€‚è¿™æœ‰åŠ©äºä»»åŠ¡è§„åˆ’å’Œæ—¶é—´ç®¡ç†ã€‚

##### åœ¨ä»£ç ä¸­çš„ä½¿ç”¨

```python
# è·å–é¢„è®¡æ—¶é—´
estimated_time = None
if properties.get('é¢„è®¡æ—¶é—´') and properties['é¢„è®¡æ—¶é—´'].get('number') is not None:
    estimated_time = properties['é¢„è®¡æ—¶é—´']['number']

# åœ¨æ¶ˆæ¯ä¸­æ˜¾ç¤ºé¢„è®¡æ—¶é—´
if estimated_time:
    message.append(f"   â±ï¸ é¢„è®¡è€—æ—¶: {estimated_time}å°æ—¶")
    
# è®¡ç®—æ€»é¢„è®¡æ—¶é—´
total_estimated_time = sum(
    task.get('properties', {}).get('é¢„è®¡æ—¶é—´', {}).get('number', 0) or 0 
    for task in pending_tasks if task.get('properties')
)
if total_estimated_time > 0:
    message.append(f"\næ€»é¢„è®¡è€—æ—¶: {total_estimated_time}å°æ—¶")
```

#### å®é™…æ—¶é—´

- **å­—æ®µåç§°**: å®é™…æ—¶é—´
- **å­—æ®µç±»å‹**: number
- **å­—æ®µID**: %3Bj%3Bm
- **æ ¼å¼**: å°æ—¶ï¼ˆæ•°å­—ï¼‰

##### æè¿°

å®é™…æ—¶é—´å­—æ®µç”¨äºè®°å½•å®Œæˆä»»åŠ¡å®é™…èŠ±è´¹çš„æ—¶é—´ï¼Œä»¥å°æ—¶ä¸ºå•ä½ã€‚è¿™æœ‰åŠ©äºä¸é¢„è®¡æ—¶é—´æ¯”è¾ƒï¼Œæ”¹è¿›æœªæ¥çš„æ—¶é—´ä¼°è®¡ã€‚

##### åœ¨ä»£ç ä¸­çš„ä½¿ç”¨

```python
# è·å–å®é™…æ—¶é—´
actual_time = None
if properties.get('å®é™…æ—¶é—´') and properties['å®é™…æ—¶é—´'].get('number') is not None:
    actual_time = properties['å®é™…æ—¶é—´']['number']

# åœ¨æ¶ˆæ¯ä¸­æ˜¾ç¤ºå®é™…æ—¶é—´ï¼ˆé’ˆå¯¹å·²å®Œæˆä»»åŠ¡ï¼‰
if task_status == "done" and actual_time:
    message.append(f"   â±ï¸ å®é™…è€—æ—¶: {actual_time}å°æ—¶")
    
    # æ¯”è¾ƒé¢„è®¡æ—¶é—´å’Œå®é™…æ—¶é—´
    if estimated_time and actual_time > estimated_time * 1.2:
        message.append(f"   âš ï¸ è€—æ—¶è¶…å‡ºé¢„æœŸ {((actual_time/estimated_time)-1)*100:.0f}%")
    
# è®¡ç®—ä»Šæ—¥å®Œæˆä»»åŠ¡çš„æ€»å®é™…æ—¶é—´
total_actual_time = sum(
    task.get('properties', {}).get('å®é™…æ—¶é—´', {}).get('number', 0) or 0 
    for task in today_completed_tasks if task.get('properties')
)
if total_actual_time > 0:
    evening_message.append(f"\nä»Šæ—¥æ€»è€—æ—¶: {total_actual_time}å°æ—¶")
```

#### è¿›åº¦

- **å­—æ®µåç§°**: è¿›åº¦
- **å­—æ®µç±»å‹**: formula
- **å­—æ®µID**: %3Bj%3Bm
- **å…¬å¼**: åŸºäºä»»åŠ¡çŠ¶æ€è®¡ç®—çš„ç™¾åˆ†æ¯”

##### æè¿°

è¿›åº¦å­—æ®µæ˜¯ä¸€ä¸ªè®¡ç®—å­—æ®µï¼Œæ ¹æ®ä»»åŠ¡çŠ¶æ€è‡ªåŠ¨è®¡ç®—å®Œæˆç™¾åˆ†æ¯”ã€‚é€šå¸¸ä½¿ç”¨å…¬å¼å°†ä¸åŒçŠ¶æ€æ˜ å°„åˆ°ç™¾åˆ†æ¯”å€¼ï¼š
- inbox: 0%
- pedding: 25%
- doing: 50%
- done: 100%

##### åœ¨ä»£ç ä¸­çš„ä½¿ç”¨

```python
# è·å–è¿›åº¦
progress = None
if properties.get('è¿›åº¦') and properties['è¿›åº¦'].get('formula') and properties['è¿›åº¦']['formula'].get('number') is not None:
    progress = properties['è¿›åº¦']['formula']['number']

# åœ¨æ¶ˆæ¯ä¸­æ˜¾ç¤ºè¿›åº¦
if progress is not None and progress < 100:
    progress_bar = generate_progress_bar(progress)
    message.append(f"   {progress_bar} {progress}%")
    
# ç”Ÿæˆè¿›åº¦æ¡å‡½æ•°
def generate_progress_bar(percentage, length=10):
    """ç”Ÿæˆæ–‡æœ¬è¿›åº¦æ¡"""
    if percentage < 0:
        percentage = 0
    if percentage > 100:
        percentage = 100
        
    filled_length = int(length * percentage / 100)
    bar = 'â–ˆ' * filled_length + 'â–‘' * (length - filled_length)
    return bar
```

### å…³ç³»å­—æ®µ

#### ä¸Šçº§é¡¹ç›®

- **å­—æ®µåç§°**: ä¸Šçº§ é¡¹ç›®
- **å­—æ®µç±»å‹**: relation
- **å­—æ®µID**: GWIU
- **å…³è”æ•°æ®åº“**: åŒä¸€æ•°æ®åº“ï¼ˆè‡ªå¼•ç”¨ï¼‰
- **åŒå‘å…³ç³»**: ä¸"å­çº§ é¡¹ç›®"å­—æ®µäº’ä¸ºåŒå‘å…³ç³»

##### æè¿°

ä¸Šçº§é¡¹ç›®å­—æ®µç”¨äºæŒ‡å®šå½“å‰ä»»åŠ¡çš„çˆ¶ä»»åŠ¡ï¼Œå»ºç«‹ä»»åŠ¡çš„å±‚çº§ç»“æ„ã€‚ä¸€ä¸ªä»»åŠ¡å¯ä»¥æœ‰å¤šä¸ªçˆ¶ä»»åŠ¡ã€‚

##### åœ¨ä»£ç ä¸­çš„ä½¿ç”¨

```python
parent_relations = properties.get('ä¸Šçº§ é¡¹ç›®', {}).get('relation', []) if properties.get('ä¸Šçº§ é¡¹ç›®') else []
parent_ids = [p.get('id') for p in parent_relations if p and p.get('id')]
```

#### å­çº§é¡¹ç›®

- **å­—æ®µåç§°**: å­çº§ é¡¹ç›®
- **å­—æ®µç±»å‹**: relation
- **å­—æ®µID**: nMNi
- **å…³è”æ•°æ®åº“**: åŒä¸€æ•°æ®åº“ï¼ˆè‡ªå¼•ç”¨ï¼‰
- **åŒå‘å…³ç³»**: ä¸"ä¸Šçº§ é¡¹ç›®"å­—æ®µäº’ä¸ºåŒå‘å…³ç³»

##### æè¿°

å­çº§é¡¹ç›®å­—æ®µç”¨äºæŒ‡å®šå½“å‰ä»»åŠ¡çš„å­ä»»åŠ¡ï¼Œå»ºç«‹ä»»åŠ¡çš„å±‚çº§ç»“æ„ã€‚ä¸€ä¸ªä»»åŠ¡å¯ä»¥æœ‰å¤šä¸ªå­ä»»åŠ¡ã€‚

##### åœ¨ä»£ç ä¸­çš„ä½¿ç”¨

```python
child_relations = properties.get('å­çº§ é¡¹ç›®', {}).get('relation', []) if properties.get('å­çº§ é¡¹ç›®') else []
child_ids = [c.get('id') for c in child_relations if c and c.get('id')]
```

#### æ­£åœ¨é˜»æ­¢

- **å­—æ®µåç§°**: æ­£åœ¨é˜»æ­¢
- **å­—æ®µç±»å‹**: relation
- **å­—æ®µID**: ]TqZ
- **å…³è”æ•°æ®åº“**: åŒä¸€æ•°æ®åº“ï¼ˆè‡ªå¼•ç”¨ï¼‰
- **åŒå‘å…³ç³»**: ä¸"è¢«é˜»æ­¢"å­—æ®µäº’ä¸ºåŒå‘å…³ç³»

##### æè¿°

æ­£åœ¨é˜»æ­¢å­—æ®µç”¨äºæŒ‡å®šå½“å‰ä»»åŠ¡é˜»æ­¢çš„å…¶ä»–ä»»åŠ¡ï¼Œå»ºç«‹ä»»åŠ¡çš„ä¾èµ–å…³ç³»ã€‚ä¸€ä¸ªä»»åŠ¡å¯ä»¥é˜»æ­¢å¤šä¸ªå…¶ä»–ä»»åŠ¡ã€‚

##### åœ¨ä»£ç ä¸­çš„ä½¿ç”¨

```python
blocking_relations = properties.get('æ­£åœ¨é˜»æ­¢', {}).get('relation', []) if properties.get('æ­£åœ¨é˜»æ­¢') else []
blocking_ids = [b.get('id') for b in blocking_relations if b and b.get('id')]
```

#### è¢«é˜»æ­¢

- **å­—æ®µåç§°**: è¢«é˜»æ­¢
- **å­—æ®µç±»å‹**: relation
- **å­—æ®µID**: vGyZ
- **å…³è”æ•°æ®åº“**: åŒä¸€æ•°æ®åº“ï¼ˆè‡ªå¼•ç”¨ï¼‰
- **åŒå‘å…³ç³»**: ä¸"æ­£åœ¨é˜»æ­¢"å­—æ®µäº’ä¸ºåŒå‘å…³ç³»

##### æè¿°

è¢«é˜»æ­¢å­—æ®µç”¨äºæŒ‡å®šé˜»æ­¢å½“å‰ä»»åŠ¡çš„å…¶ä»–ä»»åŠ¡ï¼Œå»ºç«‹ä»»åŠ¡çš„ä¾èµ–å…³ç³»ã€‚ä¸€ä¸ªä»»åŠ¡å¯ä»¥è¢«å¤šä¸ªå…¶ä»–ä»»åŠ¡é˜»æ­¢ã€‚

##### åœ¨ä»£ç ä¸­çš„ä½¿ç”¨

```python
blocked_by = properties.get('è¢«é˜»æ­¢', {}).get('relation', []) if properties.get('è¢«é˜»æ­¢') else []

# åœ¨æ¶ˆæ¯æ ¼å¼åŒ–ä¸­æ˜¾ç¤ºé˜»æ­¢å…³ç³»
if blocked_by:
    blocked_names = []
    for b in blocked_by:
        if b:
            title_array = b.get('title', [{}])
            if title_array and len(title_array) > 0:
                blocked_name = title_array[0].get('plain_text', 'æœªçŸ¥ä»»åŠ¡')
                blocked_names.append(blocked_name)
    if blocked_names:
        message.append(f"   â›”ï¸ è¢«é˜»æ­¢: {', '.join(blocked_names)}")
```

## æ•°æ®åº“è§†å›¾

æ•°æ®åº“é…ç½®äº†å¤šä¸ªè§†å›¾ä»¥æ»¡è¶³ä¸åŒçš„ä»»åŠ¡ç®¡ç†éœ€æ±‚ï¼š

1. **çœ‹æ¿è§†å›¾** - æŒ‰çŠ¶æ€åˆ†ç»„çš„ä»»åŠ¡çœ‹æ¿
2. **æ—¥å†è§†å›¾** - æŒ‰æˆªæ­¢æ—¥æœŸæ˜¾ç¤ºçš„ä»»åŠ¡æ—¥å†
3. **è¡¨æ ¼è§†å›¾** - æ‰€æœ‰ä»»åŠ¡çš„è¯¦ç»†ä¿¡æ¯è¡¨æ ¼
4. **ç”˜ç‰¹å›¾** - ä»»åŠ¡çš„æ—¶é—´çº¿è§†å›¾
5. **æŒ‰ä¼˜å…ˆçº§åˆ†ç»„** - æŒ‰å››è±¡é™ä¼˜å…ˆçº§åˆ†ç»„çš„ä»»åŠ¡åˆ—è¡¨
6. **æŒ‰è´Ÿè´£äººåˆ†ç»„** - æŒ‰ä»»åŠ¡æ‰§è¡Œè€…åˆ†ç»„çš„ä»»åŠ¡åˆ—è¡¨

## ä»£ç é›†æˆ

æœ¬æ–‡æ¡£ä¸­çš„å„ä¸ªå­—æ®µè¯´æ˜åŒ…å«äº†åœ¨ Python ä»£ç ä¸­è®¿é—®å’Œå¤„ç†è¿™äº›å­—æ®µçš„ç¤ºä¾‹ã€‚è¿™äº›ä»£ç ç¤ºä¾‹ä¸»è¦ç”¨äºï¼š

1. ä» Notion API è·å–ä»»åŠ¡æ•°æ®
2. å¤„ç†å’Œæ ¼å¼åŒ–ä»»åŠ¡ä¿¡æ¯
3. ç”Ÿæˆä»»åŠ¡æé†’æ¶ˆæ¯
4. æŒ‰ä¸åŒæ¡ä»¶ç­›é€‰å’Œæ’åºä»»åŠ¡
5. è®¡ç®—ä»»åŠ¡ç»Ÿè®¡ä¿¡æ¯ 